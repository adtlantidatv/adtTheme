!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var f;"undefined"!=typeof window?f=window:"undefined"!=typeof global?f=global:"undefined"!=typeof self&&(f=self),f.KwsMedia=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);throw new Error("Cannot find module '"+o+"'")}var f=n[o]={exports:{}};t[o][0].call(f.exports,function(e){var n=t[o][1][e];return s(n?n:e)},f,f.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){
function KwsMedia(e,r,n,t){function i(e){var r=e.method,n=e.params.value,t=n.object,i=l[t];if(!i)return console.warn("Unknown object id '"+t+"'",e);switch(r){case"onEvent":i.emit(n.type,n.data);break;default:console.warn("Unknown message type '"+r+"'")}}function o(e){for(var r in e){var n=e[r];n instanceof MediaObject&&(e[r]=n.id)}return e}function a(e,r,n){var t=new e(r,n);return t.on("release",function(){delete l[r]}),t.on("_rpc",function(e,n,t){n.object=r,n.operationParams=o(n.operationParams),m.encode(e,n,function(e,r){if(e)return t(e);var i=n.operation;if("getConnectedSinks"==i||"getMediaSinks"==i||"getMediaSrcs"==i){var o=r.sessionId;return d.getMediaobjectById(r.value,function(e,r){var r={sessionId:o,value:r};t(e,r)})}t(null,r)})}),(t instanceof Hub||t instanceof MediaPipeline)&&t.on("_create",d.create.bind(d)),l[r]=t,t}function c(e){return core[e]||endpoints[e]||filters[e]||hubs[e]||abstracts[e]||MediaObject}function s(e,r){var n=e.type,t=c(n);if(t.create){e=t.create(e.params);var i=t.prototype;inherits(t,c(e.type)),extend(t.prototype,i)}e.constructorParams=checkParams(e.params,t.constructorParams,n),delete e.params,e.constructorParams=o(e.constructorParams),m.encode("create",e,function(e,n){if(e)return r(e);var i=n.value,o=l[i];return o?r(null,o):void r(null,a(t,i))})}function u(e,r){var n=l[e];return n?r(null,n):void m.encode("describe",{object:e},function(n,t){if(n)return r(n);var i=t.type,o=c(i);if(o.create){item=o.create(item.params);var s=o.prototype;inherits(o,c(item.type)),extend(o.prototype,s)}return r(null,a(o,e))})}if(!(this instanceof KwsMedia))return new KwsMedia(e,r,n,t);var d=this;EventEmitter.call(this),r instanceof Function&&(t=n,n=r,r=void 0),r=r||{};var p,l={};if("string"==typeof e){var f=r.access_token;void 0!=f&&(e=url.parse(e,!0),e.query.access_token=f,e=url.format(e),delete r.access_token),p=new WebSocket(e)}else p=e;var m=new RpcBuilder(JsonRPC,p,function(e){return e instanceof RpcBuilder.RpcNotification?void 0!=e.duplicated?console.warning("Unexpected request:",e):i(e):void console.error("Invalid request instance",e)});p.addEventListener("close",function(e){d.emit("disconnect",e)}),this.then=function(e,r){return new Promise(function(n,t){function i(){var r;if(e)try{r=e(d)}catch(i){return t(i)}n(r)}function o(){var e;if(r)try{e=r(new Error("Connection error"))}catch(n){return t(n)}t(e)}p.readyState==p.OPEN?i():p.addEventListener("open",i),p.readyState>p.OPEN?o():p.addEventListener("error",o)})},this.catch=function(e){return this.then(null,e)},this.then(n,t),this.close=p.close.bind(p),this.getMediaobjectById=function(e,r){var n=new Promise(function(r,n){function t(e,t){return e?n(e):void r(t)}e instanceof Array?async.map(e,u,t):u(e,t)});return promiseCallback(n,r),n},this.create=function(e,r,n){if(r instanceof Function){if(n)throw new SyntaxError("Nothing can be defined after the callback");n=r,r=void 0}var t=new Promise(function(n,t){function i(e,r){return e?t(e):void n(r)}e instanceof Array?async.map(e,s,i):s({params:r||{},type:e},i)});return promiseCallback(t,n),t}}var EventEmitter=_dereq_("events").EventEmitter,extend=_dereq_("extend"),inherits=_dereq_("inherits"),url=_dereq_("url"),Promise=_dereq_("es6-promise").Promise,async=_dereq_("async"),WebSocket=_dereq_("ws"),RpcBuilder=_dereq_("kws-rpc-builder"),JsonRPC=RpcBuilder.packers.JsonRPC,checkType=_dereq_("./checkType"),checkParams=checkType.checkParams,utils=_dereq_("./utils"),noop=utils.noop,promiseCallback=utils.promiseCallback,core=_dereq_("./core"),endpoints=_dereq_("./endpoints"),filters=_dereq_("./filters"),hubs=_dereq_("./hubs"),Hub=_dereq_("./core/Hub"),MediaObject=_dereq_("./core/MediaObject"),HubPort=core.HubPort,MediaPipeline=core.MediaPipeline,abstracts={Filter:_dereq_("./core/Filter"),Hub:Hub,MediaElement:_dereq_("./core/MediaElement"),MediaPad:_dereq_("./core/MediaPad"),MediaSink:_dereq_("./core/MediaSink"),MediaSource:_dereq_("./core/MediaSource"),HttpEndpoint:_dereq_("./endpoints/HttpEndpoint"),SdpEndpoint:_dereq_("./endpoints/SdpEndpoint"),SessionEndpoint:_dereq_("./endpoints/SessionEndpoint"),UriEndpoint:_dereq_("./endpoints/UriEndpoint")};inherits(KwsMedia,EventEmitter),KwsMedia.prototype.connect=function(e,r){if(e=Array.prototype.slice.call(arguments,0),r="function"==typeof e[e.length-1]?e.pop():noop,e.length<2)throw new SyntaxError("Need at least two media elements to connect");e.forEach(function(e){checkType("MediaElement","media",e)});var n=new Promise(function(r,n){function t(e,t){return e?n(e):void r(t)}var i=e[0];async.each(e.slice(1),function(e,r){i.connect(e,r),i=e},t)});return promiseCallback(n,r),n},module.exports=KwsMedia;
//# sourceMappingURL=kws-media-api.map
},{"./checkType":3,"./core":22,"./core/Filter":13,"./core/Hub":14,"./core/MediaElement":16,"./core/MediaObject":17,"./core/MediaPad":18,"./core/MediaSink":20,"./core/MediaSource":21,"./endpoints":33,"./endpoints/HttpEndpoint":23,"./endpoints/SdpEndpoint":29,"./endpoints/SessionEndpoint":30,"./endpoints/UriEndpoint":31,"./filters":43,"./hubs":47,"./utils":48,"async":49,"es6-promise":50,"events":61,"extend":60,"inherits":68,"kws-rpc-builder":72,"url":67,"ws":76}],2:[function(_dereq_,module,exports){
function _MediaObject(e){var i=this;EventEmitter.call(this),Object.defineProperty(this,"id",{value:e});var t={};this.on("removeListener",function(e){if("release"!=e&&"_rpc"!=e&&"newListener"!=e){var r=EventEmitter.listenerCount(i,e);if(!r){var n=t[e];this.emit("_rpc","unsubscribe",{subscription:n},function(r){return r?i.emit("error",r):void delete t[e]})}}}),this.on("newListener",function(e){if("release"!=e&&"_rpc"!=e&&"_create"!=e){var r=EventEmitter.listenerCount(i,e);r||this.emit("_rpc","subscribe",{type:e},function(r,n){return r?i.emit("error",r):void(t[e]=n)})}})}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),Promise=_dereq_("es6-promise").Promise,utils=_dereq_("./utils"),noop=utils.noop,promiseCallback=utils.promiseCallback;inherits(_MediaObject,EventEmitter),_MediaObject.prototype.invoke=function(e,i,t){var r=this;if(i instanceof Function){if(t)throw new SyntaxError("Nothing can be defined after the callback");t=i,i=void 0}var n=new Promise(function(t,n){var o={operation:e};i&&(o.operationParams=i),r.emit("_rpc","invoke",o,function(e,i){if(e)return n(e);var o=i.value;void 0===o&&(o=r),t(o)})});return promiseCallback(n,t),n},_MediaObject.prototype.release=function(e){var i=this,t=new Promise(function(e,t){i.emit("_rpc","release",{},function(r){return r?t(r):(i.emit("release"),i.removeAllListeners(),void e())})});return promiseCallback(t,e),t},module.exports=_MediaObject;
//# sourceMappingURL=kws-media-api.map
},{"./utils":48,"es6-promise":50,"events":61,"inherits":68}],3:[function(_dereq_,module,exports){
function checkArray(e,r,c){if(!(c instanceof Array))throw SyntaxError(r+" param should be an Array of "+e+", not "+typeof c);for(var n,o=0;n=c[o];o++)checkType(e,r+"["+o+"]",n)}function checkBoolean(e,r){if("boolean"!=typeof r)throw SyntaxError(e+" param should be a Boolean, not "+typeof r)}function checkNumber(e,r){if("number"!=typeof r)throw SyntaxError(e+" param should be a Number, not "+typeof r)}function checkInteger(e,r){if(!Number.isInteger(r))throw SyntaxError(e+" param should be an Integer, not "+typeof r)}function checkObject(e,r){if("object"!=typeof r)throw SyntaxError(e+" param should be an Object, not "+typeof r)}function checkString(e,r){if("string"!=typeof r)throw SyntaxError(e+" param should be a String, not "+typeof r)}function checkType(e,r,c,n){if(n=n||{},void 0!=c){if(n.isArray)return checkArray(e,r,c);var o=checkType[e];if(o)return o(r,c);console.warn("Could not check "+r+", unknown type "+e)}else if(n.required)throw SyntaxError(r+" param is required")}function checkParams(e,r,c){var n={};for(var o in r){var t=e[o],a=r[o],i={required:a.required,isArray:a.isList};checkType(a.type,o,t,i),void 0!=t&&(n[o]=t,delete e[o])}return Object.keys(e).length&&console.warn("Unused params for "+c+":",e),n}function checkMethodParams(e,r){for(var c,n={},o=0;c=r[o];o++){var t=c.name,a=e[o],i={required:c.required,isArray:c.isList};checkType(c.type,t,a,i),n[t]=a}var h=e.slice(o);return h.length&&console.warning("Unused params:",h),n}function addCheckers(e){for(var r in e){var c=e[r].check;c&&(checkType[r]=c)}}var extend=_dereq_("extend");Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&e>-9007199254740992&&9007199254740992>e&&Math.floor(e)===e}),module.exports=checkType,checkType.checkParams=checkParams,checkType.boolean=checkBoolean,checkType.double=checkNumber,checkType.float=checkNumber,checkType.int=checkInteger,checkType.Object=checkObject,checkType.String=checkString;var complexTypes=_dereq_("./complexTypes");extend(checkType,complexTypes);var core=_dereq_("./core"),endpoints=_dereq_("./endpoints"),filters=_dereq_("./filters"),hubs=_dereq_("./hubs");addCheckers(core),addCheckers(endpoints),addCheckers(filters),addCheckers(hubs);var MediaElement=_dereq_("./core/MediaElement");checkType.MediaElement=MediaElement.check;
//# sourceMappingURL=kws-media-api.map
},{"./complexTypes":11,"./core":22,"./core/MediaElement":16,"./endpoints":33,"./filters":43,"./hubs":47,"extend":60}],4:[function(_dereq_,module,exports){
function checkMediaProfileSpecType(e,r){if("string"!=typeof r)throw SyntaxError(e+" param should be a String, not "+typeof r);if(!r.match("WEBM|MP4"))throw SyntaxError(e+" param is not one of [WEBM|MP4] ("+r+")")}var checkType=_dereq_("../checkType");module.exports=checkMediaProfileSpecType;
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3}],5:[function(_dereq_,module,exports){
function checkMediaType(e,r){if("string"!=typeof r)throw SyntaxError(e+" param should be a String, not "+typeof r);if(!r.match("AUDIO|DATA|VIDEO"))throw SyntaxError(e+" param is not one of [AUDIO|DATA|VIDEO] ("+r+")")}var checkType=_dereq_("../checkType");module.exports=checkMediaType;
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3}],6:[function(_dereq_,module,exports){
function checkPoint(e,c){checkType("int",e+".x",c.x,!0),checkType("int",e+".y",c.y,!0)}var checkType=_dereq_("../checkType");module.exports=checkPoint;
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3}],7:[function(_dereq_,module,exports){
function checkPointerDetectorWindowMediaParam(e,c){checkType("String",e+".id",c.id,!0),checkType("int",e+".height",c.height,!0),checkType("int",e+".width",c.width,!0),checkType("int",e+".upperRightX",c.upperRightX,!0),checkType("int",e+".upperRightY",c.upperRightY,!0),checkType("String",e+".activeImage",c.activeImage),checkType("float",e+".imageTransparency",c.imageTransparency),checkType("String",e+".image",c.image)}var checkType=_dereq_("../checkType");module.exports=checkPointerDetectorWindowMediaParam;
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3}],8:[function(_dereq_,module,exports){
function checkRegionOfInterest(e,n){checkType("Point",e+".points",n.points,!0),checkType("RegionOfInterestConfig",e+".regionOfInterestConfig",n.regionOfInterestConfig,!0),checkType("String",e+".id",n.id,!0)}var checkType=_dereq_("../checkType");module.exports=checkRegionOfInterest;
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3}],9:[function(_dereq_,module,exports){
function checkRegionOfInterestConfig(e,c){checkType("int",e+".occupancyLevelMin",c.occupancyLevelMin),checkType("int",e+".occupancyLevelMed",c.occupancyLevelMed),checkType("int",e+".occupancyLevelMax",c.occupancyLevelMax),checkType("int",e+".occupancyNumFramesToEvent",c.occupancyNumFramesToEvent),checkType("int",e+".fluidityLevelMin",c.fluidityLevelMin),checkType("int",e+".fluidityLevelMed",c.fluidityLevelMed),checkType("int",e+".fluidityLevelMax",c.fluidityLevelMax),checkType("int",e+".fluidityNumFramesToEvent",c.fluidityNumFramesToEvent),checkType("boolean",e+".sendOpticalFlowEvent",c.sendOpticalFlowEvent),checkType("int",e+".opticalFlowNumFramesToEvent",c.opticalFlowNumFramesToEvent),checkType("int",e+".opticalFlowNumFramesToReset",c.opticalFlowNumFramesToReset),checkType("int",e+".opticalFlowAngleOffset",c.opticalFlowAngleOffset)}var checkType=_dereq_("../checkType");module.exports=checkRegionOfInterestConfig;
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3}],10:[function(_dereq_,module,exports){
function checkWindowParam(e,h){checkType("int",e+".topRightCornerX",h.topRightCornerX,!0),checkType("int",e+".topRightCornerY",h.topRightCornerY,!0),checkType("int",e+".width",h.width,!0),checkType("int",e+".height",h.height,!0)}var checkType=_dereq_("../checkType");module.exports=checkWindowParam;
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3}],11:[function(_dereq_,module,exports){
var MediaProfileSpecType=_dereq_("./MediaProfileSpecType"),MediaType=_dereq_("./MediaType"),Point=_dereq_("./Point"),PointerDetectorWindowMediaParam=_dereq_("./PointerDetectorWindowMediaParam"),RegionOfInterest=_dereq_("./RegionOfInterest"),RegionOfInterestConfig=_dereq_("./RegionOfInterestConfig"),WindowParam=_dereq_("./WindowParam");exports.MediaProfileSpecType=MediaProfileSpecType,exports.MediaType=MediaType,exports.Point=Point,exports.PointerDetectorWindowMediaParam=PointerDetectorWindowMediaParam,exports.RegionOfInterest=RegionOfInterest,exports.RegionOfInterestConfig=RegionOfInterestConfig,exports.WindowParam=WindowParam;
//# sourceMappingURL=kws-media-api.map
},{"./MediaProfileSpecType":4,"./MediaType":5,"./Point":6,"./PointerDetectorWindowMediaParam":7,"./RegionOfInterest":8,"./RegionOfInterestConfig":9,"./WindowParam":10}],12:[function(_dereq_,module,exports){
function Endpoint(n){MediaElement.call(this,n)}var inherits=_dereq_("inherits"),MediaElement=_dereq_("./MediaElement");inherits(Endpoint,MediaElement),Endpoint.constructorParams={},Endpoint.events=[],Endpoint.events.concat(MediaElement.events),module.exports=Endpoint,Endpoint.check=function(n,e){if(!(e instanceof Endpoint))throw SyntaxError(n+" param should be a Endpoint, not "+typeof e)};
//# sourceMappingURL=kws-media-api.map
},{"./MediaElement":16,"inherits":68}],13:[function(_dereq_,module,exports){
function Filter(e){MediaElement.call(this,e)}var inherits=_dereq_("inherits"),MediaElement=_dereq_("./MediaElement");inherits(Filter,MediaElement),Filter.constructorParams={},Filter.events=[],Filter.events.concat(MediaElement.events),module.exports=Filter,Filter.check=function(e,t){if(!(t instanceof Filter))throw SyntaxError(e+" param should be a Filter, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"./MediaElement":16,"inherits":68}],14:[function(_dereq_,module,exports){
function Hub(e){MediaObject.call(this,e)}var inherits=_dereq_("inherits"),Promise=_dereq_("es6-promise").Promise,promiseCallback=_dereq_("../utils").promiseCallback,MediaObject=_dereq_("./MediaObject");inherits(Hub,MediaObject),Hub.prototype.createHubPort=function(e){var r=this,t=new Promise(function(e,t){r.emit("_create","HubPort",{hub:r},function(r,i){return r?t(r):void e(i)})});return promiseCallback(t,e),t},Hub.constructorParams={},Hub.events=[],Hub.events.concat(MediaObject.events),module.exports=Hub,Hub.check=function(e,r){if(!(r instanceof Hub))throw SyntaxError(e+" param should be a Hub, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../utils":48,"./MediaObject":17,"es6-promise":50,"inherits":68}],15:[function(_dereq_,module,exports){
function HubPort(e){MediaElement.call(this,e)}var inherits=_dereq_("inherits"),MediaElement=_dereq_("./MediaElement");inherits(HubPort,MediaElement),HubPort.constructorParams={hub:{type:"Hub",required:!0}},HubPort.events=[],HubPort.events.concat(MediaElement.events),module.exports=HubPort,HubPort.check=function(e,t){if(!(t instanceof HubPort))throw SyntaxError(e+" param should be a HubPort, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"./MediaElement":16,"inherits":68}],16:[function(_dereq_,module,exports){
function MediaElement(e){MediaObject.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),MediaObject=_dereq_("./MediaObject");inherits(MediaElement,MediaObject),MediaElement.prototype.connect=function(e,i,n,t){if(i instanceof Function){if(n)throw new SyntaxError("Nothing can be defined after the callback");t=i,n=void 0,i=void 0}else if(n instanceof Function){if(t)throw new SyntaxError("Nothing can be defined after the callback");t=n,n=void 0}if(!i&&n)throw new SyntaxError("'mediaType' is undefined while 'mediaDescription' is not");checkType("MediaElement","sink",e,{required:!0}),checkType("MediaType","mediaType",i),checkType("String","mediaDescription",n);var a={sink:e,mediaType:i,mediaDescription:n};return this.invoke("connect",a,t)},MediaElement.prototype.getMediaSinks=function(e,i,n){if(e instanceof Function){if(i)throw new SyntaxError("Nothing can be defined after the callback");n=e,i=void 0,e=void 0}else if(i instanceof Function){if(n)throw new SyntaxError("Nothing can be defined after the callback");n=i,i=void 0}if(!e&&i)throw new SyntaxError("'mediaType' is undefined while 'description' is not");checkType("MediaType","mediaType",e),checkType("String","description",i);var t={mediaType:e,description:i};return this.invoke("getMediaSinks",t,n)},MediaElement.prototype.getMediaSrcs=function(e,i,n){if(e instanceof Function){if(i)throw new SyntaxError("Nothing can be defined after the callback");n=e,i=void 0,e=void 0}else if(i instanceof Function){if(n)throw new SyntaxError("Nothing can be defined after the callback");n=i,i=void 0}if(!e&&i)throw new SyntaxError("'mediaType' is undefined while 'description' is not");checkType("MediaType","mediaType",e),checkType("String","description",i);var t={mediaType:e,description:i};return this.invoke("getMediaSrcs",t,n)},MediaElement.constructorParams={},MediaElement.events=[],MediaElement.events.concat(MediaObject.events),module.exports=MediaElement,MediaElement.check=function(e,i){if(!(i instanceof MediaElement))throw SyntaxError(e+" param should be a MediaElement, not "+typeof i)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./MediaObject":17,"inherits":68}],17:[function(_dereq_,module,exports){
function MediaObject(e){_MediaObject.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),_MediaObject=_dereq_("../_MediaObject");inherits(MediaObject,_MediaObject),MediaObject.prototype.getMediaPipeline=function(e){return this.invoke("getMediaPipeline",e)},MediaObject.prototype.getParent=function(e){return this.invoke("getParent",e)},MediaObject.constructorParams={},MediaObject.events=["Error"],module.exports=MediaObject,MediaObject.check=function(e,t){if(!(t instanceof MediaObject))throw SyntaxError(e+" param should be a MediaObject, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"../_MediaObject":2,"../checkType":3,"inherits":68}],18:[function(_dereq_,module,exports){
function MediaPad(e){MediaObject.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),MediaObject=_dereq_("./MediaObject");inherits(MediaPad,MediaObject),MediaPad.prototype.getMediaDescription=function(e){return this.invoke("getMediaDescription",e)},MediaPad.prototype.getMediaElement=function(e){return this.invoke("getMediaElement",e)},MediaPad.prototype.getMediaType=function(e){return this.invoke("getMediaType",e)},MediaPad.constructorParams={},MediaPad.events=[],MediaPad.events.concat(MediaObject.events),module.exports=MediaPad,MediaPad.check=function(e,i){if(!(i instanceof MediaPad))throw SyntaxError(e+" param should be a MediaPad, not "+typeof i)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./MediaObject":17,"inherits":68}],19:[function(_dereq_,module,exports){
function MediaPipeline(e){MediaObject.call(this,e)}var inherits=_dereq_("inherits"),Promise=_dereq_("es6-promise").Promise,promiseCallback=_dereq_("../utils").promiseCallback,MediaObject=_dereq_("./MediaObject");inherits(MediaPipeline,MediaObject),MediaPipeline.prototype.create=function(e,i,n){var a=this;if(i instanceof Function){if(n)throw new SyntaxError("Nothing can be defined after the callback");n=i,i=void 0}i=i||{};var r=new Promise(function(n,r){i.mediaPipeline=a,a.emit("_create",e,i,function(e,i){return e?r(e):void n(i)})});return promiseCallback(r,n),r},MediaPipeline.constructorParams={},MediaPipeline.events=[],MediaPipeline.events.concat(MediaObject.events),module.exports=MediaPipeline,MediaPipeline.check=function(e,i){if(!(i instanceof MediaPipeline))throw SyntaxError(e+" param should be a MediaPipeline, not "+typeof i)};
//# sourceMappingURL=kws-media-api.map
},{"../utils":48,"./MediaObject":17,"es6-promise":50,"inherits":68}],20:[function(_dereq_,module,exports){
function MediaSink(e){MediaPad.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),MediaPad=_dereq_("./MediaPad");inherits(MediaSink,MediaPad),MediaSink.prototype.disconnect=function(e,i){checkType("MediaSource","src",e,{required:!0});var n={src:e};return this.invoke("disconnect",n,i)},MediaSink.prototype.getConnectedSrc=function(e){return this.invoke("getConnectedSrc",e)},MediaSink.constructorParams={},MediaSink.events=[],MediaSink.events.concat(MediaPad.events),module.exports=MediaSink,MediaSink.check=function(e,i){if(!(i instanceof MediaSink))throw SyntaxError(e+" param should be a MediaSink, not "+typeof i)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./MediaPad":18,"inherits":68}],21:[function(_dereq_,module,exports){
function MediaSource(e){MediaPad.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),MediaPad=_dereq_("./MediaPad");inherits(MediaSource,MediaPad),MediaSource.prototype.connect=function(e,i){checkType("MediaSink","sink",e,{required:!0});var n={sink:e};return this.invoke("connect",n,i)},MediaSource.prototype.getConnectedSinks=function(e){return this.invoke("getConnectedSinks",e)},MediaSource.prototype.disconnect=function(e,i){checkType("MediaSink","sink",e,{required:!0});var n={sink:e};return this.invoke("disconnect",n,i)},MediaSource.constructorParams={},MediaSource.events=[],MediaSource.events.concat(MediaPad.events),module.exports=MediaSource,MediaSource.check=function(e,i){if(!(i instanceof MediaSource))throw SyntaxError(e+" param should be a MediaSource, not "+typeof i)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./MediaPad":18,"inherits":68}],22:[function(_dereq_,module,exports){
var HubPort=_dereq_("./HubPort"),MediaPipeline=_dereq_("./MediaPipeline");exports.HubPort=HubPort,exports.MediaPipeline=MediaPipeline;
//# sourceMappingURL=kws-media-api.map
},{"./HubPort":15,"./MediaPipeline":19}],23:[function(_dereq_,module,exports){
function HttpEndpoint(t){SessionEndpoint.call(this,t)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),SessionEndpoint=_dereq_("./SessionEndpoint");inherits(HttpEndpoint,SessionEndpoint),HttpEndpoint.prototype.getUrl=function(t){return this.invoke("getUrl",t)},HttpEndpoint.constructorParams={},HttpEndpoint.events=[],HttpEndpoint.events.concat(SessionEndpoint.events),module.exports=HttpEndpoint,HttpEndpoint.check=function(t,n){if(!(n instanceof HttpEndpoint))throw SyntaxError(t+" param should be a HttpEndpoint, not "+typeof n)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./SessionEndpoint":30,"inherits":68}],24:[function(_dereq_,module,exports){
function HttpGetEndpoint(t){HttpEndpoint.call(this,t)}var inherits=_dereq_("inherits"),HttpEndpoint=_dereq_("./HttpEndpoint");inherits(HttpGetEndpoint,HttpEndpoint),HttpGetEndpoint.constructorParams={disconnectionTimeout:{type:"int"},mediaPipeline:{type:"MediaPipeline",required:!0},mediaProfile:{type:"MediaProfileSpecType"},terminateOnEOS:{type:"boolean"}},HttpGetEndpoint.events=[],HttpGetEndpoint.events.concat(HttpEndpoint.events),module.exports=HttpGetEndpoint,HttpGetEndpoint.check=function(t,n){if(!(n instanceof HttpGetEndpoint))throw SyntaxError(t+" param should be a HttpGetEndpoint, not "+typeof n)};
//# sourceMappingURL=kws-media-api.map
},{"./HttpEndpoint":23,"inherits":68}],25:[function(_dereq_,module,exports){
function HttpPostEndpoint(t){HttpEndpoint.call(this,t)}var inherits=_dereq_("inherits"),HttpEndpoint=_dereq_("./HttpEndpoint");inherits(HttpPostEndpoint,HttpEndpoint),HttpPostEndpoint.constructorParams={disconnectionTimeout:{type:"int"},mediaPipeline:{type:"MediaPipeline",required:!0},useEncodedMedia:{type:"boolean"}},HttpPostEndpoint.events=["EndOfStream"],HttpPostEndpoint.events.concat(HttpEndpoint.events),module.exports=HttpPostEndpoint,HttpPostEndpoint.check=function(t,n){if(!(n instanceof HttpPostEndpoint))throw SyntaxError(t+" param should be a HttpPostEndpoint, not "+typeof n)};
//# sourceMappingURL=kws-media-api.map
},{"./HttpEndpoint":23,"inherits":68}],26:[function(_dereq_,module,exports){
function PlayerEndpoint(e){UriEndpoint.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),UriEndpoint=_dereq_("./UriEndpoint");inherits(PlayerEndpoint,UriEndpoint),PlayerEndpoint.prototype.play=function(e){return this.invoke("play",e)},PlayerEndpoint.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0},uri:{type:"String",required:!0},useEncodedMedia:{type:"boolean"}},PlayerEndpoint.events=["EndOfStream"],PlayerEndpoint.events.concat(UriEndpoint.events),module.exports=PlayerEndpoint,PlayerEndpoint.check=function(e,n){if(!(n instanceof PlayerEndpoint))throw SyntaxError(e+" param should be a PlayerEndpoint, not "+typeof n)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./UriEndpoint":31,"inherits":68}],27:[function(_dereq_,module,exports){
function RecorderEndpoint(e){UriEndpoint.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),UriEndpoint=_dereq_("./UriEndpoint");inherits(RecorderEndpoint,UriEndpoint),RecorderEndpoint.prototype.record=function(e){return this.invoke("record",e)},RecorderEndpoint.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0},mediaProfile:{type:"MediaProfileSpecType"},stopOnEndOfStream:{type:"boolean"},uri:{type:"String",required:!0}},RecorderEndpoint.events=[],RecorderEndpoint.events.concat(UriEndpoint.events),module.exports=RecorderEndpoint,RecorderEndpoint.check=function(e,r){if(!(r instanceof RecorderEndpoint))throw SyntaxError(e+" param should be a RecorderEndpoint, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./UriEndpoint":31,"inherits":68}],28:[function(_dereq_,module,exports){
function RtpEndpoint(n){SdpEndpoint.call(this,n)}var inherits=_dereq_("inherits"),SdpEndpoint=_dereq_("./SdpEndpoint");inherits(RtpEndpoint,SdpEndpoint),RtpEndpoint.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},RtpEndpoint.events=[],RtpEndpoint.events.concat(SdpEndpoint.events),module.exports=RtpEndpoint,RtpEndpoint.check=function(n,t){if(!(t instanceof RtpEndpoint))throw SyntaxError(n+" param should be a RtpEndpoint, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"./SdpEndpoint":29,"inherits":68}],29:[function(_dereq_,module,exports){
function SdpEndpoint(n){SessionEndpoint.call(this,n)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),SessionEndpoint=_dereq_("./SessionEndpoint");inherits(SdpEndpoint,SessionEndpoint),SdpEndpoint.prototype.generateOffer=function(n){return this.invoke("generateOffer",n)},SdpEndpoint.prototype.getLocalSessionDescriptor=function(n){return this.invoke("getLocalSessionDescriptor",n)},SdpEndpoint.prototype.getRemoteSessionDescriptor=function(n){return this.invoke("getRemoteSessionDescriptor",n)},SdpEndpoint.prototype.processAnswer=function(n,e){checkType("String","answer",n,{required:!0});var t={answer:n};return this.invoke("processAnswer",t,e)},SdpEndpoint.prototype.processOffer=function(n,e){checkType("String","offer",n,{required:!0});var t={offer:n};return this.invoke("processOffer",t,e)},SdpEndpoint.constructorParams={},SdpEndpoint.events=[],SdpEndpoint.events.concat(SessionEndpoint.events),module.exports=SdpEndpoint,SdpEndpoint.check=function(n,e){if(!(e instanceof SdpEndpoint))throw SyntaxError(n+" param should be a SdpEndpoint, not "+typeof e)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"./SessionEndpoint":30,"inherits":68}],30:[function(_dereq_,module,exports){
function SessionEndpoint(n){Endpoint.call(this,n)}var inherits=_dereq_("inherits"),Endpoint=_dereq_("../core/Endpoint");inherits(SessionEndpoint,Endpoint),SessionEndpoint.constructorParams={},SessionEndpoint.events=["MediaSessionStarted","MediaSessionTerminated"],SessionEndpoint.events.concat(Endpoint.events),module.exports=SessionEndpoint,SessionEndpoint.check=function(n,i){if(!(i instanceof SessionEndpoint))throw SyntaxError(n+" param should be a SessionEndpoint, not "+typeof i)};
//# sourceMappingURL=kws-media-api.map
},{"../core/Endpoint":12,"inherits":68}],31:[function(_dereq_,module,exports){
function UriEndpoint(n){Endpoint.call(this,n)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Endpoint=_dereq_("../core/Endpoint");inherits(UriEndpoint,Endpoint),UriEndpoint.prototype.getUri=function(n){return this.invoke("getUri",n)},UriEndpoint.prototype.pause=function(n){return this.invoke("pause",n)},UriEndpoint.prototype.stop=function(n){return this.invoke("stop",n)},UriEndpoint.constructorParams={},UriEndpoint.events=[],UriEndpoint.events.concat(Endpoint.events),module.exports=UriEndpoint,UriEndpoint.check=function(n,i){if(!(i instanceof UriEndpoint))throw SyntaxError(n+" param should be a UriEndpoint, not "+typeof i)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Endpoint":12,"inherits":68}],32:[function(_dereq_,module,exports){
function WebRtcEndpoint(n){SdpEndpoint.call(this,n)}var inherits=_dereq_("inherits"),SdpEndpoint=_dereq_("./SdpEndpoint");inherits(WebRtcEndpoint,SdpEndpoint),WebRtcEndpoint.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},WebRtcEndpoint.events=[],WebRtcEndpoint.events.concat(SdpEndpoint.events),module.exports=WebRtcEndpoint,WebRtcEndpoint.check=function(n,t){if(!(t instanceof WebRtcEndpoint))throw SyntaxError(n+" param should be a WebRtcEndpoint, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"./SdpEndpoint":29,"inherits":68}],33:[function(_dereq_,module,exports){
var HttpGetEndpoint=_dereq_("./HttpGetEndpoint"),HttpPostEndpoint=_dereq_("./HttpPostEndpoint"),PlayerEndpoint=_dereq_("./PlayerEndpoint"),RecorderEndpoint=_dereq_("./RecorderEndpoint"),RtpEndpoint=_dereq_("./RtpEndpoint"),WebRtcEndpoint=_dereq_("./WebRtcEndpoint");exports.HttpGetEndpoint=HttpGetEndpoint,exports.HttpPostEndpoint=HttpPostEndpoint,exports.PlayerEndpoint=PlayerEndpoint,exports.RecorderEndpoint=RecorderEndpoint,exports.RtpEndpoint=RtpEndpoint,exports.WebRtcEndpoint=WebRtcEndpoint;
//# sourceMappingURL=kws-media-api.map
},{"./HttpGetEndpoint":24,"./HttpPostEndpoint":25,"./PlayerEndpoint":26,"./RecorderEndpoint":27,"./RtpEndpoint":28,"./WebRtcEndpoint":32}],34:[function(_dereq_,module,exports){
function ChromaFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Filter=_dereq_("../core/Filter");inherits(ChromaFilter,Filter),ChromaFilter.prototype.setBackground=function(e,r){checkType("String","uri",e,{required:!0});var t={uri:e};return this.invoke("setBackground",t,r)},ChromaFilter.prototype.unsetBackground=function(e){return this.invoke("unsetBackground",e)},ChromaFilter.constructorParams={backgroundImage:{type:"String"},mediaPipeline:{type:"MediaPipeline",required:!0},window:{type:"WindowParam",required:!0}},ChromaFilter.events=[],ChromaFilter.events.concat(Filter.events),module.exports=ChromaFilter,ChromaFilter.check=function(e,r){if(!(r instanceof ChromaFilter))throw SyntaxError(e+" param should be a ChromaFilter, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Filter":13,"inherits":68}],35:[function(_dereq_,module,exports){
function CrowdDetectorFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),Filter=_dereq_("../core/Filter");inherits(CrowdDetectorFilter,Filter),CrowdDetectorFilter.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0},rois:{type:"RegionOfInterest",isList:!0,required:!0}},CrowdDetectorFilter.events=["CrowdDetectorDirection","CrowdDetectorFluidity","CrowdDetectorOccupancy"],CrowdDetectorFilter.events.concat(Filter.events),module.exports=CrowdDetectorFilter,CrowdDetectorFilter.check=function(e,r){if(!(r instanceof CrowdDetectorFilter))throw SyntaxError(e+" param should be a CrowdDetectorFilter, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../core/Filter":13,"inherits":68}],36:[function(_dereq_,module,exports){
function FaceOverlayFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Filter=_dereq_("../core/Filter");inherits(FaceOverlayFilter,Filter),FaceOverlayFilter.prototype.setOverlayedImage=function(e,r,t,i,a,c){checkType("String","uri",e,{required:!0}),checkType("float","offsetXPercent",r,{required:!0}),checkType("float","offsetYPercent",t,{required:!0}),checkType("float","widthPercent",i,{required:!0}),checkType("float","heightPercent",a,{required:!0});var l={uri:e,offsetXPercent:r,offsetYPercent:t,widthPercent:i,heightPercent:a};return this.invoke("setOverlayedImage",l,c)},FaceOverlayFilter.prototype.unsetOverlayedImage=function(e){return this.invoke("unsetOverlayedImage",e)},FaceOverlayFilter.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},FaceOverlayFilter.events=[],FaceOverlayFilter.events.concat(Filter.events),module.exports=FaceOverlayFilter,FaceOverlayFilter.check=function(e,r){if(!(r instanceof FaceOverlayFilter))throw SyntaxError(e+" param should be a FaceOverlayFilter, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Filter":13,"inherits":68}],37:[function(_dereq_,module,exports){
function GStreamerFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),Filter=_dereq_("../core/Filter");inherits(GStreamerFilter,Filter),GStreamerFilter.constructorParams={command:{type:"String",required:!0},mediaPipeline:{type:"MediaPipeline",required:!0}},GStreamerFilter.events=[],GStreamerFilter.events.concat(Filter.events),module.exports=GStreamerFilter,GStreamerFilter.check=function(e,r){if(!(r instanceof GStreamerFilter))throw SyntaxError(e+" param should be a GStreamerFilter, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../core/Filter":13,"inherits":68}],38:[function(_dereq_,module,exports){
function JackVaderFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),Filter=_dereq_("../core/Filter");inherits(JackVaderFilter,Filter),JackVaderFilter.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},JackVaderFilter.events=[],JackVaderFilter.events.concat(Filter.events),module.exports=JackVaderFilter,JackVaderFilter.check=function(e,r){if(!(r instanceof JackVaderFilter))throw SyntaxError(e+" param should be a JackVaderFilter, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../core/Filter":13,"inherits":68}],39:[function(_dereq_,module,exports){
function PlateDetectorFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Filter=_dereq_("../core/Filter");inherits(PlateDetectorFilter,Filter),PlateDetectorFilter.prototype.setPlateWidthPercentage=function(e,t){checkType("float","plateWidthPercentage",e,{required:!0});var r={plateWidthPercentage:e};return this.invoke("setPlateWidthPercentage",r,t)},PlateDetectorFilter.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},PlateDetectorFilter.events=["PlateDetected"],PlateDetectorFilter.events.concat(Filter.events),module.exports=PlateDetectorFilter,PlateDetectorFilter.check=function(e,t){if(!(t instanceof PlateDetectorFilter))throw SyntaxError(e+" param should be a PlateDetectorFilter, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Filter":13,"inherits":68}],40:[function(_dereq_,module,exports){
function PointerDetectorAdvFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Filter=_dereq_("../core/Filter");inherits(PointerDetectorAdvFilter,Filter),PointerDetectorAdvFilter.prototype.addWindow=function(e,t){checkType("PointerDetectorWindowMediaParam","window",e,{required:!0});var r={window:e};return this.invoke("addWindow",r,t)},PointerDetectorAdvFilter.prototype.clearWindows=function(e){return this.invoke("clearWindows",e)},PointerDetectorAdvFilter.prototype.removeWindow=function(e,t){checkType("String","windowId",e,{required:!0});var r={windowId:e};return this.invoke("removeWindow",r,t)},PointerDetectorAdvFilter.prototype.trackColorFromCalibrationRegion=function(e){return this.invoke("trackColorFromCalibrationRegion",e)},PointerDetectorAdvFilter.constructorParams={calibrationRegion:{type:"WindowParam",required:!0},mediaPipeline:{type:"MediaPipeline",required:!0},windows:{type:"PointerDetectorWindowMediaParam",isList:!0}},PointerDetectorAdvFilter.events=["WindowIn","WindowOut"],PointerDetectorAdvFilter.events.concat(Filter.events),module.exports=PointerDetectorAdvFilter,PointerDetectorAdvFilter.check=function(e,t){if(!(t instanceof PointerDetectorAdvFilter))throw SyntaxError(e+" param should be a PointerDetectorAdvFilter, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Filter":13,"inherits":68}],41:[function(_dereq_,module,exports){
function PointerDetectorFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Filter=_dereq_("../core/Filter");inherits(PointerDetectorFilter,Filter),PointerDetectorFilter.prototype.addWindow=function(e,t){checkType("PointerDetectorWindowMediaParam","window",e,{required:!0});var r={window:e};return this.invoke("addWindow",r,t)},PointerDetectorFilter.prototype.clearWindows=function(e){return this.invoke("clearWindows",e)},PointerDetectorFilter.prototype.removeWindow=function(e,t){checkType("String","windowId",e,{required:!0});var r={windowId:e};return this.invoke("removeWindow",r,t)},PointerDetectorFilter.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0},windows:{type:"PointerDetectorWindowMediaParam",isList:!0}},PointerDetectorFilter.events=["WindowIn","WindowOut"],PointerDetectorFilter.events.concat(Filter.events),module.exports=PointerDetectorFilter,PointerDetectorFilter.check=function(e,t){if(!(t instanceof PointerDetectorFilter))throw SyntaxError(e+" param should be a PointerDetectorFilter, not "+typeof t)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Filter":13,"inherits":68}],42:[function(_dereq_,module,exports){
function ZBarFilter(e){Filter.call(this,e)}var inherits=_dereq_("inherits"),Filter=_dereq_("../core/Filter");inherits(ZBarFilter,Filter),ZBarFilter.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},ZBarFilter.events=["CodeFound"],ZBarFilter.events.concat(Filter.events),module.exports=ZBarFilter,ZBarFilter.check=function(e,r){if(!(r instanceof ZBarFilter))throw SyntaxError(e+" param should be a ZBarFilter, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../core/Filter":13,"inherits":68}],43:[function(_dereq_,module,exports){
var ChromaFilter=_dereq_("./ChromaFilter"),CrowdDetectorFilter=_dereq_("./CrowdDetectorFilter"),FaceOverlayFilter=_dereq_("./FaceOverlayFilter"),GStreamerFilter=_dereq_("./GStreamerFilter"),JackVaderFilter=_dereq_("./JackVaderFilter"),PlateDetectorFilter=_dereq_("./PlateDetectorFilter"),PointerDetectorAdvFilter=_dereq_("./PointerDetectorAdvFilter"),PointerDetectorFilter=_dereq_("./PointerDetectorFilter"),ZBarFilter=_dereq_("./ZBarFilter");exports.ChromaFilter=ChromaFilter,exports.CrowdDetectorFilter=CrowdDetectorFilter,exports.FaceOverlayFilter=FaceOverlayFilter,exports.GStreamerFilter=GStreamerFilter,exports.JackVaderFilter=JackVaderFilter,exports.PlateDetectorFilter=PlateDetectorFilter,exports.PointerDetectorAdvFilter=PointerDetectorAdvFilter,exports.PointerDetectorFilter=PointerDetectorFilter,exports.ZBarFilter=ZBarFilter;
//# sourceMappingURL=kws-media-api.map
},{"./ChromaFilter":34,"./CrowdDetectorFilter":35,"./FaceOverlayFilter":36,"./GStreamerFilter":37,"./JackVaderFilter":38,"./PlateDetectorFilter":39,"./PointerDetectorAdvFilter":40,"./PointerDetectorFilter":41,"./ZBarFilter":42}],44:[function(_dereq_,module,exports){
function Composite(e){Hub.call(this,e)}var inherits=_dereq_("inherits"),Hub=_dereq_("../core/Hub");inherits(Composite,Hub),Composite.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},Composite.events=[],Composite.events.concat(Hub.events),module.exports=Composite,Composite.check=function(e,o){if(!(o instanceof Composite))throw SyntaxError(e+" param should be a Composite, not "+typeof o)};
//# sourceMappingURL=kws-media-api.map
},{"../core/Hub":14,"inherits":68}],45:[function(_dereq_,module,exports){
function Dispatcher(e){Hub.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Hub=_dereq_("../core/Hub");inherits(Dispatcher,Hub),Dispatcher.prototype.connect=function(e,r,i){checkType("HubPort","source",e,{required:!0}),checkType("HubPort","sink",r,{required:!0});var t={source:e,sink:r};return this.invoke("connect",t,i)},Dispatcher.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},Dispatcher.events=[],Dispatcher.events.concat(Hub.events),module.exports=Dispatcher,Dispatcher.check=function(e,r){if(!(r instanceof Dispatcher))throw SyntaxError(e+" param should be a Dispatcher, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Hub":14,"inherits":68}],46:[function(_dereq_,module,exports){
function DispatcherOneToMany(e){Hub.call(this,e)}var inherits=_dereq_("inherits"),checkType=_dereq_("../checkType"),Hub=_dereq_("../core/Hub");inherits(DispatcherOneToMany,Hub),DispatcherOneToMany.prototype.removeSource=function(e){return this.invoke("removeSource",e)},DispatcherOneToMany.prototype.setSource=function(e,r){checkType("HubPort","source",e,{required:!0});var n={source:e};return this.invoke("setSource",n,r)},DispatcherOneToMany.constructorParams={mediaPipeline:{type:"MediaPipeline",required:!0}},DispatcherOneToMany.events=[],DispatcherOneToMany.events.concat(Hub.events),module.exports=DispatcherOneToMany,DispatcherOneToMany.check=function(e,r){if(!(r instanceof DispatcherOneToMany))throw SyntaxError(e+" param should be a DispatcherOneToMany, not "+typeof r)};
//# sourceMappingURL=kws-media-api.map
},{"../checkType":3,"../core/Hub":14,"inherits":68}],47:[function(_dereq_,module,exports){
var Composite=_dereq_("./Composite"),Dispatcher=_dereq_("./Dispatcher"),DispatcherOneToMany=_dereq_("./DispatcherOneToMany");exports.Composite=Composite,exports.Dispatcher=Dispatcher,exports.DispatcherOneToMany=DispatcherOneToMany;
//# sourceMappingURL=kws-media-api.map
},{"./Composite":44,"./Dispatcher":45,"./DispatcherOneToMany":46}],48:[function(_dereq_,module,exports){
function noop(o){o&&console.error(o)}function promiseCallback(o,n){function r(o,r){try{n(o,r)}catch(c){throw console.error(c),c}}n&&o.then(function(o){r(null,o)},r)}exports.noop=noop,exports.promiseCallback=promiseCallback;
//# sourceMappingURL=kws-media-api.map
},{}],49:[function(_dereq_,module,exports){
(function (process){
!function(){function n(n){var e=!1;return function(){if(e)throw new Error("Callback was already called.");e=!0,n.apply(t,arguments)}}var t,e,r={};t=this,null!=t&&(e=t.async),r.noConflict=function(){return t.async=e,r};var u=Object.prototype.toString,i=Array.isArray||function(n){return"[object Array]"===u.call(n)},c=function(n,t){if(n.forEach)return n.forEach(t);for(var e=0;e<n.length;e+=1)t(n[e],e,n)},a=function(n,t){if(n.map)return n.map(t);var e=[];return c(n,function(n,r,u){e.push(t(n,r,u))}),e},o=function(n,t,e){return n.reduce?n.reduce(t,e):(c(n,function(n,r,u){e=t(e,n,r,u)}),e)},l=function(n){if(Object.keys)return Object.keys(n);var t=[];for(var e in n)n.hasOwnProperty(e)&&t.push(e);return t};"undefined"!=typeof process&&process.nextTick?(r.nextTick=process.nextTick,r.setImmediate="undefined"!=typeof setImmediate?function(n){setImmediate(n)}:r.nextTick):"function"==typeof setImmediate?(r.nextTick=function(n){setImmediate(n)},r.setImmediate=r.nextTick):(r.nextTick=function(n){setTimeout(n,0)},r.setImmediate=r.nextTick),r.each=function(t,e,r){function u(n){n?(r(n),r=function(){}):(i+=1,i>=t.length&&r())}if(r=r||function(){},!t.length)return r();var i=0;c(t,function(t){e(t,n(u))})},r.forEach=r.each,r.eachSeries=function(n,t,e){if(e=e||function(){},!n.length)return e();var r=0,u=function(){t(n[r],function(t){t?(e(t),e=function(){}):(r+=1,r>=n.length?e():u())})};u()},r.forEachSeries=r.eachSeries,r.eachLimit=function(n,t,e,r){var u=f(t);u.apply(null,[n,e,r])},r.forEachLimit=r.eachLimit;var f=function(n){return function(t,e,r){if(r=r||function(){},!t.length||0>=n)return r();var u=0,i=0,c=0;!function a(){if(u>=t.length)return r();for(;n>c&&i<t.length;)i+=1,c+=1,e(t[i-1],function(n){n?(r(n),r=function(){}):(u+=1,c-=1,u>=t.length?r():a())})}()}},s=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.each].concat(t))}},p=function(n,t){return function(){var e=Array.prototype.slice.call(arguments);return t.apply(null,[f(n)].concat(e))}},d=function(n){return function(){var t=Array.prototype.slice.call(arguments);return n.apply(null,[r.eachSeries].concat(t))}},y=function(n,t,e,r){if(t=a(t,function(n,t){return{index:t,value:n}}),r){var u=[];n(t,function(n,t){e(n.value,function(e,r){u[n.index]=r,t(e)})},function(n){r(n,u)})}else n(t,function(n,t){e(n.value,function(n){t(n)})})};r.map=s(y),r.mapSeries=d(y),r.mapLimit=function(n,t,e,r){return m(t)(n,e,r)};var m=function(n){return p(n,y)};r.reduce=function(n,t,e,u){r.eachSeries(n,function(n,r){e(t,n,function(n,e){t=e,r(n)})},function(n){u(n,t)})},r.inject=r.reduce,r.foldl=r.reduce,r.reduceRight=function(n,t,e,u){var i=a(n,function(n){return n}).reverse();r.reduce(i,t,e,u)},r.foldr=r.reduceRight;var v=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e&&u.push(n),t()})},function(){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.filter=s(v),r.filterSeries=d(v),r.select=r.filter,r.selectSeries=r.filterSeries;var h=function(n,t,e,r){var u=[];t=a(t,function(n,t){return{index:t,value:n}}),n(t,function(n,t){e(n.value,function(e){e||u.push(n),t()})},function(){r(a(u.sort(function(n,t){return n.index-t.index}),function(n){return n.value}))})};r.reject=s(h),r.rejectSeries=d(h);var g=function(n,t,e,r){n(t,function(n,t){e(n,function(e){e?(r(n),r=function(){}):t()})},function(){r()})};r.detect=s(g),r.detectSeries=d(g),r.some=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n&&(e(!0),e=function(){}),r()})},function(){e(!1)})},r.any=r.some,r.every=function(n,t,e){r.each(n,function(n,r){t(n,function(n){n||(e(!1),e=function(){}),r()})},function(){e(!0)})},r.all=r.every,r.sortBy=function(n,t,e){r.map(n,function(n,e){t(n,function(t,r){t?e(t):e(null,{value:n,criteria:r})})},function(n,t){if(n)return e(n);var r=function(n,t){var e=n.criteria,r=t.criteria;return r>e?-1:e>r?1:0};e(null,a(t.sort(r),function(n){return n.value}))})},r.auto=function(n,t){t=t||function(){};var e=l(n),u=e.length;if(!u)return t();var a={},f=[],s=function(n){f.unshift(n)},p=function(n){for(var t=0;t<f.length;t+=1)if(f[t]===n)return void f.splice(t,1)},d=function(){u--,c(f.slice(0),function(n){n()})};s(function(){if(!u){var n=t;t=function(){},n(null,a)}}),c(e,function(e){var u=i(n[e])?n[e]:[n[e]],f=function(n){var u=Array.prototype.slice.call(arguments,1);if(u.length<=1&&(u=u[0]),n){var i={};c(l(a),function(n){i[n]=a[n]}),i[e]=u,t(n,i),t=function(){}}else a[e]=u,r.setImmediate(d)},y=u.slice(0,Math.abs(u.length-1))||[],m=function(){return o(y,function(n,t){return n&&a.hasOwnProperty(t)},!0)&&!a.hasOwnProperty(e)};if(m())u[u.length-1](f,a);else{var v=function(){m()&&(p(v),u[u.length-1](f,a))};s(v)}})},r.retry=function(n,t,e){var u=5,i=[];"function"==typeof n&&(e=t,t=n,n=u),n=parseInt(n,10)||u;var c=function(u,c){for(var a=function(n,t){return function(e){n(function(n,r){e(!n||t,{err:n,result:r})},c)}};n;)i.push(a(t,!(n-=1)));r.series(i,function(n,t){t=t[t.length-1],(u||e)(t.err,t.result)})};return e?c():c},r.waterfall=function(n,t){if(t=t||function(){},!i(n)){var e=new Error("First argument to waterfall must be an array of functions");return t(e)}if(!n.length)return t();var u=function(n){return function(e){if(e)t.apply(null,arguments),t=function(){};else{var i=Array.prototype.slice.call(arguments,1),c=n.next();i.push(c?u(c):t),r.setImmediate(function(){n.apply(null,i)})}}};u(r.iterator(n))()};var k=function(n,t,e){if(e=e||function(){},i(t))n.map(t,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},e);else{var r={};n.each(l(t),function(n,e){t[n](function(t){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),r[n]=u,e(t)})},function(n){e(n,r)})}};r.parallel=function(n,t){k({map:r.map,each:r.each},n,t)},r.parallelLimit=function(n,t,e){k({map:m(t),each:f(t)},n,e)},r.series=function(n,t){if(t=t||function(){},i(n))r.mapSeries(n,function(n,t){n&&n(function(n){var e=Array.prototype.slice.call(arguments,1);e.length<=1&&(e=e[0]),t.call(null,n,e)})},t);else{var e={};r.eachSeries(l(n),function(t,r){n[t](function(n){var u=Array.prototype.slice.call(arguments,1);u.length<=1&&(u=u[0]),e[t]=u,r(n)})},function(n){t(n,e)})}},r.iterator=function(n){var t=function(e){var r=function(){return n.length&&n[e].apply(null,arguments),r.next()};return r.next=function(){return e<n.length-1?t(e+1):null},r};return t(0)},r.apply=function(n){var t=Array.prototype.slice.call(arguments,1);return function(){return n.apply(null,t.concat(Array.prototype.slice.call(arguments)))}};var A=function(n,t,e,r){var u=[];n(t,function(n,t){e(n,function(n,e){u=u.concat(e||[]),t(n)})},function(n){r(n,u)})};r.concat=s(A),r.concatSeries=d(A),r.whilst=function(n,t,e){n()?t(function(u){return u?e(u):void r.whilst(n,t,e)}):e()},r.doWhilst=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?r.doWhilst(n,t,e):e()})},r.until=function(n,t,e){n()?e():t(function(u){return u?e(u):void r.until(n,t,e)})},r.doUntil=function(n,t,e){n(function(u){if(u)return e(u);var i=Array.prototype.slice.call(arguments,1);t.apply(null,i)?e():r.doUntil(n,t,e)})},r.queue=function(t,e){function u(n,t,e,u){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var i={data:t,callback:"function"==typeof u?u:null};e?n.tasks.unshift(i):n.tasks.push(i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}void 0===e&&(e=1);var a=0,o={tasks:[],concurrency:e,saturated:null,empty:null,drain:null,started:!1,paused:!1,push:function(n,t){u(o,n,!1,t)},kill:function(){o.drain=null,o.tasks=[]},unshift:function(n,t){u(o,n,!0,t)},process:function(){if(!o.paused&&a<o.concurrency&&o.tasks.length){var e=o.tasks.shift();o.empty&&0===o.tasks.length&&o.empty(),a+=1;var r=function(){a-=1,e.callback&&e.callback.apply(e,arguments),o.drain&&o.tasks.length+a===0&&o.drain(),o.process()},u=n(r);t(e.data,u)}},length:function(){return o.tasks.length},running:function(){return a},idle:function(){return o.tasks.length+a===0},pause:function(){o.paused!==!0&&(o.paused=!0,o.process())},resume:function(){o.paused!==!1&&(o.paused=!1,o.process())}};return o},r.priorityQueue=function(n,t){function e(n,t){return n.priority-t.priority}function u(n,t,e){for(var r=-1,u=n.length-1;u>r;){var i=r+(u-r+1>>>1);e(t,n[i])>=0?r=i:u=i-1}return r}function a(n,t,a,o){return n.started||(n.started=!0),i(t)||(t=[t]),0==t.length?r.setImmediate(function(){n.drain&&n.drain()}):void c(t,function(t){var i={data:t,priority:a,callback:"function"==typeof o?o:null};n.tasks.splice(u(n.tasks,i,e)+1,0,i),n.saturated&&n.tasks.length===n.concurrency&&n.saturated(),r.setImmediate(n.process)})}var o=r.queue(n,t);return o.push=function(n,t,e){a(o,n,t,e)},delete o.unshift,o},r.cargo=function(n,t){var e=!1,u=[],o={tasks:u,payload:t,saturated:null,empty:null,drain:null,drained:!0,push:function(n,e){i(n)||(n=[n]),c(n,function(n){u.push({data:n,callback:"function"==typeof e?e:null}),o.drained=!1,o.saturated&&u.length===t&&o.saturated()}),r.setImmediate(o.process)},process:function l(){if(!e){if(0===u.length)return o.drain&&!o.drained&&o.drain(),void(o.drained=!0);var r="number"==typeof t?u.splice(0,t):u.splice(0,u.length),i=a(r,function(n){return n.data});o.empty&&o.empty(),e=!0,n(i,function(){e=!1;var n=arguments;c(r,function(t){t.callback&&t.callback.apply(null,n)}),l()})}},length:function(){return u.length},running:function(){return e}};return o};var x=function(n){return function(t){var e=Array.prototype.slice.call(arguments,1);t.apply(null,e.concat([function(t){var e=Array.prototype.slice.call(arguments,1);"undefined"!=typeof console&&(t?console.error&&console.error(t):console[n]&&c(e,function(t){console[n](t)}))}]))}};r.log=x("log"),r.dir=x("dir"),r.memoize=function(n,t){var e={},u={};t=t||function(n){return n};var i=function(){var i=Array.prototype.slice.call(arguments),c=i.pop(),a=t.apply(null,i);a in e?r.nextTick(function(){c.apply(null,e[a])}):a in u?u[a].push(c):(u[a]=[c],n.apply(null,i.concat([function(){e[a]=arguments;var n=u[a];delete u[a];for(var t=0,r=n.length;r>t;t++)n[t].apply(null,arguments)}])))};return i.memo=e,i.unmemoized=n,i},r.unmemoize=function(n){return function(){return(n.unmemoized||n).apply(null,arguments)}},r.times=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.map(u,t,e)},r.timesSeries=function(n,t,e){for(var u=[],i=0;n>i;i++)u.push(i);return r.mapSeries(u,t,e)},r.seq=function(){var n=arguments;return function(){var t=this,e=Array.prototype.slice.call(arguments),u=e.pop();r.reduce(n,e,function(n,e,r){e.apply(t,n.concat([function(){var n=arguments[0],t=Array.prototype.slice.call(arguments,1);r(n,t)}]))},function(n,e){u.apply(t,[n].concat(e))})}},r.compose=function(){return r.seq.apply(null,Array.prototype.reverse.call(arguments))};var S=function(n,t){var e=function(){var e=this,r=Array.prototype.slice.call(arguments),u=r.pop();return n(t,function(n,t){n.apply(e,r.concat([t]))},u)};if(arguments.length>2){var r=Array.prototype.slice.call(arguments,2);return e.apply(this,r)}return e};r.applyEach=s(S),r.applyEachSeries=d(S),r.forever=function(n,t){function e(r){if(r){if(t)return t(r);throw r}n(e)}e()},"undefined"!=typeof module&&module.exports?module.exports=r:"undefined"!=typeof define&&define.amd?define([],function(){return r}):t.async=r}();
//# sourceMappingURL=kws-media-api.map
}).call(this,_dereq_("JkpR2F"))
},{"JkpR2F":62}],50:[function(_dereq_,module,exports){
"use strict";var Promise=_dereq_("./promise/promise").Promise,polyfill=_dereq_("./promise/polyfill").polyfill;exports.Promise=Promise,exports.polyfill=polyfill;
//# sourceMappingURL=kws-media-api.map
},{"./promise/polyfill":54,"./promise/promise":55}],51:[function(_dereq_,module,exports){
"use strict";function all(r){var n=this;if(!isArray(r))throw new TypeError("You must pass an array to all.");return new n(function(n,t){function i(r){return function(n){u(r,n)}}function u(r,t){e[r]=t,0===--s&&n(e)}var a,e=[],s=r.length;0===s&&n([]);for(var o=0;o<r.length;o++)a=r[o],a&&isFunction(a.then)?a.then(i(o),t):u(o,a)})}var isArray=_dereq_("./utils").isArray,isFunction=_dereq_("./utils").isFunction;exports.all=all;
//# sourceMappingURL=kws-media-api.map
},{"./utils":59}],52:[function(_dereq_,module,exports){
(function (process,global){
"use strict";function useNextTick(){return function(){process.nextTick(flush)}}function useMutationObserver(){var e=0,t=new BrowserMutationObserver(flush),u=document.createTextNode("");return t.observe(u,{characterData:!0}),function(){u.data=e=++e%2}}function useSetTimeout(){return function(){local.setTimeout(flush,1)}}function flush(){for(var e=0;e<queue.length;e++){var t=queue[e],u=t[0],o=t[1];u(o)}queue=[]}function asap(e,t){var u=queue.push([e,t]);1===u&&scheduleFlush()}var browserGlobal="undefined"!=typeof window?window:{},BrowserMutationObserver=browserGlobal.MutationObserver||browserGlobal.WebKitMutationObserver,local="undefined"!=typeof global?global:void 0===this?window:this,queue=[],scheduleFlush;scheduleFlush="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?useNextTick():BrowserMutationObserver?useMutationObserver():useSetTimeout(),exports.asap=asap;
//# sourceMappingURL=kws-media-api.map
}).call(this,_dereq_("JkpR2F"),typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"JkpR2F":62}],53:[function(_dereq_,module,exports){
"use strict";function configure(n,i){return 2!==arguments.length?config[n]:void(config[n]=i)}var config={instrument:!1};exports.config=config,exports.configure=configure;
//# sourceMappingURL=kws-media-api.map
},{}],54:[function(_dereq_,module,exports){
(function (global){
"use strict";function polyfill(){var i;i="undefined"!=typeof global?global:"undefined"!=typeof window&&window.document?window:self;var e="Promise"in i&&"resolve"in i.Promise&&"reject"in i.Promise&&"all"in i.Promise&&"race"in i.Promise&&function(){var e;return new i.Promise(function(i){e=i}),isFunction(e)}();e||(i.Promise=RSVPPromise)}var RSVPPromise=_dereq_("./promise").Promise,isFunction=_dereq_("./utils").isFunction;exports.polyfill=polyfill;
//# sourceMappingURL=kws-media-api.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{"./promise":55,"./utils":59}],55:[function(_dereq_,module,exports){
"use strict";function Promise(e){if(!isFunction(e))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof Promise))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._subscribers=[],invokeResolver(e,this)}function invokeResolver(e,t){function r(e){resolve(t,e)}function i(e){reject(t,e)}try{e(r,i)}catch(n){i(n)}}function invokeCallback(e,t,r,i){var n,s,o,c,u=isFunction(r);if(u)try{n=r(i),o=!0}catch(l){c=!0,s=l}else n=i,o=!0;handleThenable(t,n)||(u&&o?resolve(t,n):c?reject(t,s):e===FULFILLED?resolve(t,n):e===REJECTED&&reject(t,n))}function subscribe(e,t,r,i){var n=e._subscribers,s=n.length;n[s]=t,n[s+FULFILLED]=r,n[s+REJECTED]=i}function publish(e,t){for(var r,i,n=e._subscribers,s=e._detail,o=0;o<n.length;o+=3)r=n[o],i=n[o+t],invokeCallback(t,r,i,s);e._subscribers=null}function handleThenable(e,t){var r,i=null;try{if(e===t)throw new TypeError("A promises callback cannot return that same promise.");if(objectOrFunction(t)&&(i=t.then,isFunction(i)))return i.call(t,function(i){return r?!0:(r=!0,void(t!==i?resolve(e,i):fulfill(e,i)))},function(t){return r?!0:(r=!0,void reject(e,t))}),!0}catch(n){return r?!0:(reject(e,n),!0)}return!1}function resolve(e,t){e===t?fulfill(e,t):handleThenable(e,t)||fulfill(e,t)}function fulfill(e,t){e._state===PENDING&&(e._state=SEALED,e._detail=t,config.async(publishFulfillment,e))}function reject(e,t){e._state===PENDING&&(e._state=SEALED,e._detail=t,config.async(publishRejection,e))}function publishFulfillment(e){publish(e,e._state=FULFILLED)}function publishRejection(e){publish(e,e._state=REJECTED)}var config=_dereq_("./config").config,configure=_dereq_("./config").configure,objectOrFunction=_dereq_("./utils").objectOrFunction,isFunction=_dereq_("./utils").isFunction,now=_dereq_("./utils").now,all=_dereq_("./all").all,race=_dereq_("./race").race,staticResolve=_dereq_("./resolve").resolve,staticReject=_dereq_("./reject").reject,asap=_dereq_("./asap").asap,counter=0;config.async=asap;var PENDING=void 0,SEALED=0,FULFILLED=1,REJECTED=2;Promise.prototype={constructor:Promise,_state:void 0,_detail:void 0,_subscribers:void 0,then:function(e,t){var r=this,i=new this.constructor(function(){});if(this._state){var n=arguments;config.async(function(){invokeCallback(r._state,i,n[r._state-1],r._detail)})}else subscribe(this,i,e,t);return i},"catch":function(e){return this.then(null,e)}},Promise.all=all,Promise.race=race,Promise.resolve=staticResolve,Promise.reject=staticReject,exports.Promise=Promise;
//# sourceMappingURL=kws-media-api.map
},{"./all":51,"./asap":52,"./config":53,"./race":56,"./reject":57,"./resolve":58,"./utils":59}],56:[function(_dereq_,module,exports){
"use strict";function race(r){var e=this;if(!isArray(r))throw new TypeError("You must pass an array to race.");return new e(function(e,t){for(var a,n=0;n<r.length;n++)a=r[n],a&&"function"==typeof a.then?a.then(e,t):e(a)})}var isArray=_dereq_("./utils").isArray;exports.race=race;
//# sourceMappingURL=kws-media-api.map
},{"./utils":59}],57:[function(_dereq_,module,exports){
"use strict";function reject(e){var t=this;return new t(function(t,r){r(e)})}exports.reject=reject;
//# sourceMappingURL=kws-media-api.map
},{}],58:[function(_dereq_,module,exports){
"use strict";function resolve(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=this;return new t(function(t){t(e)})}exports.resolve=resolve;
//# sourceMappingURL=kws-media-api.map
},{}],59:[function(_dereq_,module,exports){
"use strict";function objectOrFunction(t){return isFunction(t)||"object"==typeof t&&null!==t}function isFunction(t){return"function"==typeof t}function isArray(t){return"[object Array]"===Object.prototype.toString.call(t)}var now=Date.now||function(){return(new Date).getTime()};exports.objectOrFunction=objectOrFunction,exports.isFunction=isFunction,exports.isArray=isArray,exports.now=now;
//# sourceMappingURL=kws-media-api.map
},{}],60:[function(_dereq_,module,exports){
function isPlainObject(t){if(!t||"[object Object]"!==toString.call(t)||t.nodeType||t.setInterval)return!1;var r=hasOwn.call(t,"constructor"),o=hasOwn.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!o)return!1;var n;for(n in t);return void 0===n||hasOwn.call(t,n)}var hasOwn=Object.prototype.hasOwnProperty,toString=Object.prototype.toString;module.exports=function t(){var r,o,n,e,a,i,c=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof c&&(u=c,c=arguments[1]||{},s=2),"object"!=typeof c&&"function"!=typeof c&&(c={});l>s;s++)if(null!=(r=arguments[s]))for(o in r)n=c[o],e=r[o],c!==e&&(u&&e&&(isPlainObject(e)||(a=Array.isArray(e)))?(a?(a=!1,i=n&&Array.isArray(n)?n:[]):i=n&&isPlainObject(n)?n:{},c[o]=t(u,i,e)):void 0!==e&&(c[o]=e));return c};
//# sourceMappingURL=kws-media-api.map
},{}],61:[function(_dereq_,module,exports){
function EventEmitter(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function isFunction(e){return"function"==typeof e}function isNumber(e){return"number"==typeof e}function isObject(e){return"object"==typeof e&&null!==e}function isUndefined(e){return void 0===e}module.exports=EventEmitter,EventEmitter.EventEmitter=EventEmitter,EventEmitter.prototype._events=void 0,EventEmitter.prototype._maxListeners=void 0,EventEmitter.defaultMaxListeners=10,EventEmitter.prototype.setMaxListeners=function(e){if(!isNumber(e)||0>e||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},EventEmitter.prototype.emit=function(e){var t,n,s,i,r,o;if(this._events||(this._events={}),"error"===e&&(!this._events.error||isObject(this._events.error)&&!this._events.error.length))throw t=arguments[1],t instanceof Error?t:TypeError('Uncaught, unspecified "error" event.');if(n=this._events[e],isUndefined(n))return!1;if(isFunction(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];n.apply(this,i)}else if(isObject(n)){for(s=arguments.length,i=new Array(s-1),r=1;s>r;r++)i[r-1]=arguments[r];for(o=n.slice(),s=o.length,r=0;s>r;r++)o[r].apply(this,i)}return!0},EventEmitter.prototype.addListener=function(e,t){var n;if(!isFunction(t))throw TypeError("listener must be a function");if(this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,isFunction(t.listener)?t.listener:t),this._events[e]?isObject(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,isObject(this._events[e])&&!this._events[e].warned){var n;n=isUndefined(this._maxListeners)?EventEmitter.defaultMaxListeners:this._maxListeners,n&&n>0&&this._events[e].length>n&&(this._events[e].warned=!0,console.error("(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.",this._events[e].length),"function"==typeof console.trace&&console.trace())}return this},EventEmitter.prototype.on=EventEmitter.prototype.addListener,EventEmitter.prototype.once=function(e,t){function n(){this.removeListener(e,n),s||(s=!0,t.apply(this,arguments))}if(!isFunction(t))throw TypeError("listener must be a function");var s=!1;return n.listener=t,this.on(e,n),this},EventEmitter.prototype.removeListener=function(e,t){var n,s,i,r;if(!isFunction(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(n=this._events[e],i=n.length,s=-1,n===t||isFunction(n.listener)&&n.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(isObject(n)){for(r=i;r-->0;)if(n[r]===t||n[r].listener&&n[r].listener===t){s=r;break}if(0>s)return this;1===n.length?(n.length=0,delete this._events[e]):n.splice(s,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},EventEmitter.prototype.removeAllListeners=function(e){var t,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(n=this._events[e],isFunction(n))this.removeListener(e,n);else for(;n.length;)this.removeListener(e,n[n.length-1]);return delete this._events[e],this},EventEmitter.prototype.listeners=function(e){var t;return t=this._events&&this._events[e]?isFunction(this._events[e])?[this._events[e]]:this._events[e].slice():[]},EventEmitter.listenerCount=function(e,t){var n;return n=e._events&&e._events[t]?isFunction(e._events[t])?1:e._events[t].length:0};
//# sourceMappingURL=kws-media-api.map
},{}],62:[function(_dereq_,module,exports){
function noop(){}var process=module.exports={};process.nextTick=function(){var o="undefined"!=typeof window&&window.setImmediate,e="undefined"!=typeof window&&window.postMessage&&window.addEventListener;if(o)return function(o){return window.setImmediate(o)};if(e){var s=[];return window.addEventListener("message",function(o){var e=o.source;if((e===window||null===e)&&"process-tick"===o.data&&(o.stopPropagation(),s.length>0)){var n=s.shift();n()}},!0),function(o){s.push(o),window.postMessage("process-tick","*")}}return function(o){setTimeout(o,0)}}(),process.title="browser",process.browser=!0,process.env={},process.argv=[],process.on=noop,process.addListener=noop,process.once=noop,process.off=noop,process.removeListener=noop,process.removeAllListeners=noop,process.emit=noop,process.binding=function(){throw new Error("process.binding is not supported")},process.cwd=function(){return"/"},process.chdir=function(){throw new Error("process.chdir is not supported")};
//# sourceMappingURL=kws-media-api.map
},{}],63:[function(_dereq_,module,exports){
(function (global){
!function(o){function e(o){throw RangeError(L[o])}function n(o,e){for(var n=o.length;n--;)o[n]=e(o[n]);return o}function t(o,e){return n(o.split(S),e).join(".")}function r(o){for(var e,n,t=[],r=0,u=o.length;u>r;)e=o.charCodeAt(r++),e>=55296&&56319>=e&&u>r?(n=o.charCodeAt(r++),56320==(64512&n)?t.push(((1023&e)<<10)+(1023&n)+65536):(t.push(e),r--)):t.push(e);return t}function u(o){return n(o,function(o){var e="";return o>65535&&(o-=65536,e+=R(o>>>10&1023|55296),o=56320|1023&o),e+=R(o)}).join("")}function i(o){return 10>o-48?o-22:26>o-65?o-65:26>o-97?o-97:x}function f(o,e){return o+22+75*(26>o)-((0!=e)<<5)}function c(o,e,n){var t=0;for(o=n?P(o/m):o>>1,o+=P(o/e);o>M*C>>1;t+=x)o=P(o/M);return P(t+(M+1)*o/(o+j))}function l(o){var n,t,r,f,l,d,s,a,p,h,v=[],g=o.length,w=0,j=I,m=A;for(t=o.lastIndexOf(F),0>t&&(t=0),r=0;t>r;++r)o.charCodeAt(r)>=128&&e("not-basic"),v.push(o.charCodeAt(r));for(f=t>0?t+1:0;g>f;){for(l=w,d=1,s=x;f>=g&&e("invalid-input"),a=i(o.charCodeAt(f++)),(a>=x||a>P((b-w)/d))&&e("overflow"),w+=a*d,p=m>=s?y:s>=m+C?C:s-m,!(p>a);s+=x)h=x-p,d>P(b/h)&&e("overflow"),d*=h;n=v.length+1,m=c(w-l,n,0==l),P(w/n)>b-j&&e("overflow"),j+=P(w/n),w%=n,v.splice(w++,0,j)}return u(v)}function d(o){var n,t,u,i,l,d,s,a,p,h,v,g,w,j,m,E=[];for(o=r(o),g=o.length,n=I,t=0,l=A,d=0;g>d;++d)v=o[d],128>v&&E.push(R(v));for(u=i=E.length,i&&E.push(F);g>u;){for(s=b,d=0;g>d;++d)v=o[d],v>=n&&s>v&&(s=v);for(w=u+1,s-n>P((b-t)/w)&&e("overflow"),t+=(s-n)*w,n=s,d=0;g>d;++d)if(v=o[d],n>v&&++t>b&&e("overflow"),v==n){for(a=t,p=x;h=l>=p?y:p>=l+C?C:p-l,!(h>a);p+=x)m=a-h,j=x-h,E.push(R(f(h+m%j,0))),a=P(m/j);E.push(R(f(a,0))),l=c(t,w,u==i),t=0,++u}++t,++n}return E.join("")}function s(o){return t(o,function(o){return E.test(o)?l(o.slice(4).toLowerCase()):o})}function a(o){return t(o,function(o){return O.test(o)?"xn--"+d(o):o})}var p="object"==typeof exports&&exports,h="object"==typeof module&&module&&module.exports==p&&module,v="object"==typeof global&&global;(v.global===v||v.window===v)&&(o=v);var g,w,b=2147483647,x=36,y=1,C=26,j=38,m=700,A=72,I=128,F="-",E=/^xn--/,O=/[^ -~]/,S=/\x2E|\u3002|\uFF0E|\uFF61/g,L={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},M=x-y,P=Math.floor,R=String.fromCharCode;if(g={version:"1.2.4",ucs2:{decode:r,encode:u},decode:l,encode:d,toASCII:a,toUnicode:s},"function"==typeof define&&"object"==typeof define.amd&&define.amd)define("punycode",function(){return g});else if(p&&!p.nodeType)if(h)h.exports=g;else for(w in g)g.hasOwnProperty(w)&&(p[w]=g[w]);else o.punycode=g}(this);
//# sourceMappingURL=kws-media-api.map
}).call(this,typeof self !== "undefined" ? self : typeof window !== "undefined" ? window : {})
},{}],64:[function(_dereq_,module,exports){
"use strict";function hasOwnProperty(r,e){return Object.prototype.hasOwnProperty.call(r,e)}module.exports=function(r,e,t,n){e=e||"&",t=t||"=";var o={};if("string"!=typeof r||0===r.length)return o;var a=/\+/g;r=r.split(e);var s=1e3;n&&"number"==typeof n.maxKeys&&(s=n.maxKeys);var p=r.length;s>0&&p>s&&(p=s);for(var y=0;p>y;++y){var u,c,i,l,f=r[y].replace(a,"%20"),v=f.indexOf(t);v>=0?(u=f.substr(0,v),c=f.substr(v+1)):(u=f,c=""),i=decodeURIComponent(u),l=decodeURIComponent(c),hasOwnProperty(o,i)?isArray(o[i])?o[i].push(l):o[i]=[o[i],l]:o[i]=l}return o};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)};
//# sourceMappingURL=kws-media-api.map
},{}],65:[function(_dereq_,module,exports){
"use strict";function map(r,e){if(r.map)return r.map(e);for(var t=[],n=0;n<r.length;n++)t.push(e(r[n],n));return t}var stringifyPrimitive=function(r){switch(typeof r){case"string":return r;case"boolean":return r?"true":"false";case"number":return isFinite(r)?r:"";default:return""}};module.exports=function(r,e,t,n){return e=e||"&",t=t||"=",null===r&&(r=void 0),"object"==typeof r?map(objectKeys(r),function(n){var i=encodeURIComponent(stringifyPrimitive(n))+t;return isArray(r[n])?map(r[n],function(r){return i+encodeURIComponent(stringifyPrimitive(r))}).join(e):i+encodeURIComponent(stringifyPrimitive(r[n]))}).join(e):n?encodeURIComponent(stringifyPrimitive(n))+t+encodeURIComponent(stringifyPrimitive(r)):""};var isArray=Array.isArray||function(r){return"[object Array]"===Object.prototype.toString.call(r)},objectKeys=Object.keys||function(r){var e=[];for(var t in r)Object.prototype.hasOwnProperty.call(r,t)&&e.push(t);return e};
//# sourceMappingURL=kws-media-api.map
},{}],66:[function(_dereq_,module,exports){
"use strict";exports.decode=exports.parse=_dereq_("./decode"),exports.encode=exports.stringify=_dereq_("./encode");
//# sourceMappingURL=kws-media-api.map
},{"./decode":64,"./encode":65}],67:[function(_dereq_,module,exports){
function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function urlParse(t,s,e){if(t&&isObject(t)&&t instanceof Url)return t;var h=new Url;return h.parse(t,s,e),h}function urlFormat(t){return isString(t)&&(t=urlParse(t)),t instanceof Url?t.format():Url.prototype.format.call(t)}function urlResolve(t,s){return urlParse(t,!1,!0).resolve(s)}function urlResolveObject(t,s){return t?urlParse(t,!1,!0).resolveObject(s):s}function isString(t){return"string"==typeof t}function isObject(t){return"object"==typeof t&&null!==t}function isNull(t){return null===t}function isNullOrUndefined(t){return null==t}var punycode=_dereq_("punycode");exports.parse=urlParse,exports.resolve=urlResolve,exports.resolveObject=urlResolveObject,exports.format=urlFormat,exports.Url=Url;var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,delims=["<",">",'"',"`"," ","\r","\n","	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=_dereq_("querystring");Url.prototype.parse=function(t,s,e){if(!isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var h=t;h=h.trim();var r=protocolPattern.exec(h);if(r){r=r[0];var o=r.toLowerCase();this.protocol=o,h=h.substr(r.length)}if(e||r||h.match(/^\/\/[^@\/]+@[^@\/]+/)){var a="//"===h.substr(0,2);!a||r&&hostlessProtocol[r]||(h=h.substr(2),this.slashes=!0)}if(!hostlessProtocol[r]&&(a||r&&!slashedProtocol[r])){for(var n=-1,i=0;i<hostEndingChars.length;i++){var l=h.indexOf(hostEndingChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}var c,u;u=-1===n?h.lastIndexOf("@"):h.lastIndexOf("@",n),-1!==u&&(c=h.slice(0,u),h=h.slice(u+1),this.auth=decodeURIComponent(c)),n=-1;for(var i=0;i<nonHostChars.length;i++){var l=h.indexOf(nonHostChars[i]);-1!==l&&(-1===n||n>l)&&(n=l)}-1===n&&(n=h.length),this.host=h.slice(0,n),h=h.slice(n),this.parseHost(),this.hostname=this.hostname||"";var p="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!p)for(var f=this.hostname.split(/\./),i=0,m=f.length;m>i;i++){var v=f[i];if(v&&!v.match(hostnamePartPattern)){for(var g="",y=0,d=v.length;d>y;y++)g+=v.charCodeAt(y)>127?"x":v[y];if(!g.match(hostnamePartPattern)){var P=f.slice(0,i),b=f.slice(i+1),j=v.match(hostnamePartStart);j&&(P.push(j[1]),b.unshift(j[2])),b.length&&(h="/"+b.join(".")+h),this.hostname=P.join(".");break}}}if(this.hostname=this.hostname.length>hostnameMaxLen?"":this.hostname.toLowerCase(),!p){for(var O=this.hostname.split("."),q=[],i=0;i<O.length;++i){var x=O[i];q.push(x.match(/[^A-Za-z0-9_-]/)?"xn--"+punycode.encode(x):x)}this.hostname=q.join(".")}var U=this.port?":"+this.port:"",C=this.hostname||"";this.host=C+U,this.href+=this.host,p&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==h[0]&&(h="/"+h))}if(!unsafeProtocol[o])for(var i=0,m=autoEscape.length;m>i;i++){var A=autoEscape[i],E=encodeURIComponent(A);E===A&&(E=escape(A)),h=h.split(A).join(E)}var w=h.indexOf("#");-1!==w&&(this.hash=h.substr(w),h=h.slice(0,w));var R=h.indexOf("?");if(-1!==R?(this.search=h.substr(R),this.query=h.substr(R+1),s&&(this.query=querystring.parse(this.query)),h=h.slice(0,R)):s&&(this.search="",this.query={}),h&&(this.pathname=h),slashedProtocol[o]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var U=this.pathname||"",x=this.search||"";this.path=U+x}return this.href=this.format(),this},Url.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var s=this.protocol||"",e=this.pathname||"",h=this.hash||"",r=!1,o="";this.host?r=t+this.host:this.hostname&&(r=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&isObject(this.query)&&Object.keys(this.query).length&&(o=querystring.stringify(this.query));var a=this.search||o&&"?"+o||"";return s&&":"!==s.substr(-1)&&(s+=":"),this.slashes||(!s||slashedProtocol[s])&&r!==!1?(r="//"+(r||""),e&&"/"!==e.charAt(0)&&(e="/"+e)):r||(r=""),h&&"#"!==h.charAt(0)&&(h="#"+h),a&&"?"!==a.charAt(0)&&(a="?"+a),e=e.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),a=a.replace("#","%23"),s+r+e+a+h},Url.prototype.resolve=function(t){return this.resolveObject(urlParse(t,!1,!0)).format()},Url.prototype.resolveObject=function(t){if(isString(t)){var s=new Url;s.parse(t,!1,!0),t=s}var e=new Url;if(Object.keys(this).forEach(function(t){e[t]=this[t]},this),e.hash=t.hash,""===t.href)return e.href=e.format(),e;if(t.slashes&&!t.protocol)return Object.keys(t).forEach(function(s){"protocol"!==s&&(e[s]=t[s])}),slashedProtocol[e.protocol]&&e.hostname&&!e.pathname&&(e.path=e.pathname="/"),e.href=e.format(),e;if(t.protocol&&t.protocol!==e.protocol){if(!slashedProtocol[t.protocol])return Object.keys(t).forEach(function(s){e[s]=t[s]}),e.href=e.format(),e;if(e.protocol=t.protocol,t.host||hostlessProtocol[t.protocol])e.pathname=t.pathname;else{for(var h=(t.pathname||"").split("/");h.length&&!(t.host=h.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==h[0]&&h.unshift(""),h.length<2&&h.unshift(""),e.pathname=h.join("/")}if(e.search=t.search,e.query=t.query,e.host=t.host||"",e.auth=t.auth,e.hostname=t.hostname||t.host,e.port=t.port,e.pathname||e.search){var r=e.pathname||"",o=e.search||"";e.path=r+o}return e.slashes=e.slashes||t.slashes,e.href=e.format(),e}var a=e.pathname&&"/"===e.pathname.charAt(0),n=t.host||t.pathname&&"/"===t.pathname.charAt(0),i=n||a||e.host&&t.pathname,l=i,c=e.pathname&&e.pathname.split("/")||[],h=t.pathname&&t.pathname.split("/")||[],u=e.protocol&&!slashedProtocol[e.protocol];if(u&&(e.hostname="",e.port=null,e.host&&(""===c[0]?c[0]=e.host:c.unshift(e.host)),e.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===h[0]?h[0]=t.host:h.unshift(t.host)),t.host=null),i=i&&(""===h[0]||""===c[0])),n)e.host=t.host||""===t.host?t.host:e.host,e.hostname=t.hostname||""===t.hostname?t.hostname:e.hostname,e.search=t.search,e.query=t.query,c=h;else if(h.length)c||(c=[]),c.pop(),c=c.concat(h),e.search=t.search,e.query=t.query;else if(!isNullOrUndefined(t.search)){if(u){e.hostname=e.host=c.shift();var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return e.search=t.search,e.query=t.query,isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.href=e.format(),e}if(!c.length)return e.pathname=null,e.path=e.search?"/"+e.search:null,e.href=e.format(),e;for(var f=c.slice(-1)[0],m=(e.host||t.host)&&("."===f||".."===f)||""===f,v=0,g=c.length;g>=0;g--)f=c[g],"."==f?c.splice(g,1):".."===f?(c.splice(g,1),v++):v&&(c.splice(g,1),v--);if(!i&&!l)for(;v--;v)c.unshift("..");!i||""===c[0]||c[0]&&"/"===c[0].charAt(0)||c.unshift(""),m&&"/"!==c.join("/").substr(-1)&&c.push("");var y=""===c[0]||c[0]&&"/"===c[0].charAt(0);if(u){e.hostname=e.host=y?"":c.length?c.shift():"";var p=e.host&&e.host.indexOf("@")>0?e.host.split("@"):!1;p&&(e.auth=p.shift(),e.host=e.hostname=p.shift())}return i=i||e.host&&c.length,i&&!y&&c.unshift(""),c.length?e.pathname=c.join("/"):(e.pathname=null,e.path=null),isNull(e.pathname)&&isNull(e.search)||(e.path=(e.pathname?e.pathname:"")+(e.search?e.search:"")),e.auth=t.auth||e.auth,e.slashes=e.slashes||t.slashes,e.href=e.format(),e},Url.prototype.parseHost=function(){var t=this.host,s=portPattern.exec(t);s&&(s=s[0],":"!==s&&(this.port=s.substr(1)),t=t.substr(0,t.length-s.length)),t&&(this.hostname=t)};
//# sourceMappingURL=kws-media-api.map
},{"punycode":63,"querystring":66}],68:[function(_dereq_,module,exports){
module.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var o=function(){};o.prototype=e.prototype,t.prototype=new o,t.prototype.constructor=t};
//# sourceMappingURL=kws-media-api.map
},{}],69:[function(_dereq_,module,exports){
function Mapper(){var e={};this.forEach=function(t){for(var r in e){var o=e[r];for(var i in o)t(o[i])}},this.get=function(t,r){var o=e[r];return void 0==o?void 0:o[t]},this.remove=function(t,r){var o=e[r];void 0!=o&&(delete o[t],Object.keys(o).length||delete e[r])},this.set=function(t,r,o){if(void 0==t)return this.remove(r,o);var i=e[o];void 0==i&&(e[o]=i={}),i[r]=t}}Mapper.prototype.pop=function(e,t){var r=this.get(e,t);return void 0==r?void 0:(this.remove(e,t),r)},module.exports=Mapper;
//# sourceMappingURL=kws-media-api.map
},{}],70:[function(_dereq_,module,exports){
var JsonRpcClient=_dereq_("./jsonrpcclient");exports.JsonRpcClient=JsonRpcClient;
//# sourceMappingURL=kws-media-api.map
},{"./jsonrpcclient":71}],71:[function(_dereq_,module,exports){
function JsonRpcClient(e,r,n){var i=new WebSocket(e);i.addEventListener("error",n);var s=new RpcBuilder(RpcBuilder.packers.JsonRPC,i,r);this.close=s.close.bind(s),this.sendRequest=s.encode.bind(s)}var RpcBuilder=_dereq_("../.."),WebSocket=_dereq_("ws");module.exports=JsonRpcClient;
//# sourceMappingURL=kws-media-api.map
},{"../..":72,"ws":76}],72:[function(_dereq_,module,exports){
function unifyResponseMethods(e){if(!e)return{};for(var t in e){var r=e[t];"string"==typeof r&&(e[t]={response:r})}return e}function unifyTransport(e){if(e){if(e instanceof Function)return e;if(e.send instanceof Function)return e.send.bind(e);if(e.postMessage instanceof Function)return e.postMessage.bind(e);if(void 0===e.onmessage)throw new SyntaxError("Transport is not a function nor a valid object")}}function RpcNotification(e,t){Object.defineProperty(this,"method",{value:e,enumerable:!0}),Object.defineProperty(this,"params",{value:t,enumerable:!0})}function RpcBuilder(e,t,r,n){function i(e){var t=u.decode(e.data);t&&u.emit("request",t)}function o(e,t,r){var n={message:e,timeout:setTimeout(function(){y.remove(t,r)},l)};y.set(n,t,r)}function a(e,t){var r=setTimeout(function(){w.remove(e,t)},v);w.set(r,e,t)}function s(t,r,n,i,a){RpcNotification.call(this,t,r),Object.defineProperty(this,"transport",{get:function(){return a},set:function(e){a=unifyTransport(e)}});var s=y.get(n,i);a||u.transport||Object.defineProperty(this,"duplicated",{value:Boolean(s)});var c=f[t];this.pack=function(){return e.pack(this,n)},this.reply=function(t,r,a){if(t instanceof Function||t&&t.send instanceof Function){if(void 0!=r)throw new SyntaxError("There can't be parameters after callback");a=t,r=null,t=void 0}else if(r instanceof Function||r&&r.send instanceof Function){if(void 0!=a)throw new SyntaxError("There can't be parameters after callback");a=r,r=null}a=unifyTransport(a),s&&clearTimeout(s.timeout),void 0!=i&&(t&&(t.dest=i),r&&(r.dest=i));var f;if(t||void 0!=r){if(void 0!=u.peerID&&(t?t.from=u.peerID:r.from=u.peerID),c)if(void 0==c.error&&t)f={error:t};else{var p=t?c.error:c.response;f={method:p,params:t||r}}else f={error:t,result:r};f=e.pack(f,n)}else f=s?s.message:e.pack({result:null},n);return o(f,n,i),a=a||this.transport||u.transport,a?a(f):f}}function c(e){var t=E[e];if(t){delete E[e];var r=h.pop(t.id,t.dest);r&&(clearTimeout(r.timeout),a(t.id,t.dest))}}var u=this;if(!e)throw new SyntaxError("Packer is not defined");if(!e.pack||!e.unpack)throw new SyntaxError("Packer is invalid");var f=unifyResponseMethods(e.responseMethods);if(t instanceof Function||t&&t.send instanceof Function){if(r&&!(r instanceof Function))throw new SyntaxError("Only a function can be after transport");n=r,r=t,t=void 0}if((r instanceof Function||r&&r.send instanceof Function)&&n&&!(n instanceof Function))throw new SyntaxError("Only a function can be after transport");t=t||{},EventEmitter.call(this),n&&this.on("request",n),Object.defineProperty(this,"peerID",{value:t.peerID});var p=t.max_retries||0;Object.defineProperty(this,"transport",{get:function(){return r},set:function(e){r&&void 0!==r.onmessage&&r.removeEventListener("message",i),e&&void 0!==e.onmessage&&e.addEventListener("message",i),r=unifyTransport(e)}}),this.transport=r;const d=t.request_timeout||BASE_TIMEOUT,l=t.response_timeout||BASE_TIMEOUT,v=t.duplicates_timeout||BASE_TIMEOUT;var m=0,h=new Mapper,y=new Mapper,w=new Mapper,E={};inherits(s,RpcNotification),this.cancel=function(e){if(e)return c(e);for(var e in E)c(e)},this.close=function(){var e=u.transport;e&&e.close&&e.close(),this.cancel(),w.forEach(function(e){clearTimeout(e)}),y.forEach(function(e){clearTimeout(e.timeout)})},this.encode=function(t,r,n,i,o){function a(e,t){u.cancel(v),o(e,t)}function s(e){return b.timeout=setTimeout(l,d*Math.pow(2,T++)),E[v]={id:y,dest:n},h.set(b,y,n),e=e||g||u.transport,e?e(v):v}function c(e){e=unifyTransport(e),console.warn(T+" retry for request message:",v);var t=w.pop(y,n);return clearTimeout(t),s(e)}function l(){if(p>T)return c(i);var e=new Error("Request has timed out");e.request=v,e.retry=c,a(e)}if(r instanceof Function){if(void 0!=n)throw new SyntaxError("There can't be parameters after callback");o=r,i=void 0,n=void 0,r=void 0}else if(n instanceof Function){if(void 0!=i)throw new SyntaxError("There can't be parameters after callback");o=n,i=void 0,n=void 0}else if(i instanceof Function){if(void 0!=o)throw new SyntaxError("There can't be parameters after callback");o=i,i=void 0}void 0!=u.peerID&&(r=r||{},r.from=u.peerID),void 0!=n&&(r=r||{},r.dest=n);var v={method:t,params:r};if(o){var y=m++,T=0;v=e.pack(v,y);var b={message:v,callback:a,responseMethods:f[t]||{}},g=unifyTransport(i);return s(i)}return v=e.pack(v),i=i||u.transport,i?i(v):v},this.decode=function(t,r){function n(){if(r=unifyTransport(r)||u.transport){var e=y.get(f,v);if(e)return r(e.message)}var t=void 0!=f?f:p;return new s(d,l,t,v,r)}function i(e,t,r){e.callback(t,r)}function o(e){console.warn("Response already processed",t),clearTimeout(e),a(p,v)}if(!t)throw new TypeError("Message is not defined");try{t=e.unpack(t)}catch(c){return console.debug(c,t)}var f=t.id,p=t.ack,d=t.method,l=t.params||{},v=l.from,m=l.dest;if(void 0==u.peerID||v!=u.peerID){if(void 0==f&&void 0==p)return new RpcNotification(d,l);if(d){if(void 0==m||m==u.peerID){var E=h.get(p,v);if(E){var T=E.responseMethods;return d==T.error?i(E,l):d==T.response?i(E,null,l):n()}var b=w.get(p,v);if(b)return o(b)}return n()}var g=t.error,k=t.result;if(!(g&&g.dest&&g.dest!=u.sessionID||k&&k.dest&&k.dest!=u.sessionID)){var E=h.get(p,v);if(!E){var b=w.get(p,v);return b?o(b):console.warn("No callback was defined for this message",t)}i(E,g,k)}}}}var EventEmitter=_dereq_("events").EventEmitter,inherits=_dereq_("inherits"),packers=_dereq_("./packers"),Mapper=_dereq_("./Mapper");const BASE_TIMEOUT=5e3;inherits(RpcBuilder,EventEmitter),RpcBuilder.RpcNotification=RpcNotification,module.exports=RpcBuilder;var clients=_dereq_("./clients");RpcBuilder.clients=clients,RpcBuilder.packers=packers;
//# sourceMappingURL=kws-media-api.map
},{"./Mapper":69,"./clients":70,"./packers":75,"events":61,"inherits":68}],73:[function(_dereq_,module,exports){
function pack(r,e){var o={jsonrpc:"2.0"};if(r.method)o.method=r.method,r.params&&(o.params=r.params),void 0!=e&&(o.id=e);else if(void 0!=e){if(r.error){if(void 0!==r.result)throw new TypeError("Both result and error are defined");o.error=r.error}else{if(void 0===r.result)throw new TypeError("No result or error is defined");o.result=r.result}o.id=e}return JSON.stringify(o)}function unpack(r){var e=r;("string"==typeof r||r instanceof String)&&(e=JSON.parse(r));var o=e.jsonrpc;if("2.0"!=o)throw new TypeError("Invalid JsonRPC version '"+o+"': "+r);if(void 0==e.method){if(void 0==e.id)throw new TypeError("Invalid message: "+r);var i=void 0!==e.result,t=void 0!==e.error;if(i&&t)throw new TypeError("Both result and error are defined: "+r);if(!i&&!t)throw new TypeError("No result or error is defined: "+r);e.ack=e.id,delete e.id}return e}exports.pack=pack,exports.unpack=unpack;
//# sourceMappingURL=kws-media-api.map
},{}],74:[function(_dereq_,module,exports){
function pack(){throw new TypeError("Not yet implemented")}function unpack(){throw new TypeError("Not yet implemented")}exports.pack=pack,exports.unpack=unpack;
//# sourceMappingURL=kws-media-api.map
},{}],75:[function(_dereq_,module,exports){
var JsonRPC=_dereq_("./JsonRPC"),XmlRPC=_dereq_("./XmlRPC");exports.JsonRPC=JsonRPC,exports.XmlRPC=XmlRPC;
//# sourceMappingURL=kws-media-api.map
},{"./JsonRPC":73,"./XmlRPC":74}],76:[function(_dereq_,module,exports){
function ws(e,o){var t;return t=o?new WebSocket(e,o):new WebSocket(e)}var global=function(){return this}(),WebSocket=global.WebSocket||global.MozWebSocket;module.exports=WebSocket?ws:null,WebSocket&&(ws.prototype=WebSocket.prototype);
//# sourceMappingURL=kws-media-api.map
},{}]},{},[1])

(1)
});

//# sourceMappingURL=kws-media-api.map